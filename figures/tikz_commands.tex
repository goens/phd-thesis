\usetikzlibrary{positioning,arrows}

\tikzset{processingelement/.pic={
  \draw ({0}, {0}) rectangle ++(2,2);
  \draw ({2},{2}) -- ++(0.5,0.5);
  \draw ({2.5},{2.5}) rectangle ++(1,1) ++(-0.5,-0.5) node[font=\large] {R};
  }
} 

\tikzset{fourmesh/.pic={
\foreach \x in {0,...,3}{
       \foreach \y in {0,...,3}{
         \pgfmathsetmacro{\xn}{0+\x*1.25}
         \pgfmathsetmacro{\yn}{0+\y*1.25} 
         \pic (pe\x\y) [scale=0.25] at (\xn,\yn) {processingelement};
       }
     }
     \foreach \x in {0,...,2}{
     \foreach \y in {0,...,2}{
       \pgfmathsetmacro{\xs}{\x*1.25+0.95}
       \pgfmathsetmacro{\ys}{\y*1.25+0.95}
       \pgfmathsetmacro{\xn}{\xs+0.94}
       \pgfmathsetmacro{\yn}{\ys+0.94}
     \path[<->,very thick] (\xs,\ys) edge (\xn,\ys);
     \path[<->,very thick] (\xs,\ys) edge (\xs,\yn);
     }
     }
}
}
%\newcommand{\drawmesh}[1] {
%  \foreach \x in {0,...,{#1 - 1}}{
%    \foreach \y in {0,...,{#1 - 1}}{
%         \pgfmathtruncatemacro{0+\x*4}{#3+\x*4}
%         \pgfmathtruncatemacro{\yn}{#4+\y*4} 
%         \pic
%    }
%  }
%}
  
